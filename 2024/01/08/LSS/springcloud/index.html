<!DOCTYPE html>
<html>
	<head>
		
<title>Spring Cloud-ğŸ§ </title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/dragon.ico">

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="java,Spring,Spring Cloud,">
<meta name="description" content="Spring Cloudå­¦ä¹ è¿‡ç¨‹">


<script src="/js/jquery.min.js"></script>


<script src="/js/index.js"></script>


<script src="/js/fancybox.umd.js"></script>


<script src="/js/fancybox-images.js"></script>


<script src="/js/gitalk.min.js"></script>


<script src="/js/hljs.min.js"></script>
 
<script>hljs.highlightAll();</script>

	<meta name="generator" content="Hexo 6.3.0"></head>

	<body>
		
	<div class="header">
		<div class="header-top" id="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/dragon.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										ä¸»é¡µ
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										æ–‡æ¡£
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										åˆ†ç±»
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										æ ‡ç­¾
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										å‹æƒ…é“¾æ¥
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										æˆ‘
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>SoftLipa</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">ä¸»é¡µ</a>
        </li>
        
        <li>
            <a href="/archives">æ–‡æ¡£</a>
        </li>
        
        <li>
            <a href="/categories">åˆ†ç±»</a>
        </li>
        
        <li>
            <a href="/tags">æ ‡ç­¾</a>
        </li>
        
        <li>
            <a href="/links">å‹æƒ…é“¾æ¥</a>
        </li>
        
        <li>
            <a href="/about">æˆ‘</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quietä¸»é¢˜">
        </a>
        
    </div>
</div>
<div class='shelter'>
</div>
<style>
    .shelter{
        background-color: #333;
        opacity:0.5;
        cursor: pointer;
        display: none; 
        position: fixed;
        left: 0;
        top: 0; 
        right: 0;
        bottom: 0;
        z-index: 1998;
    }
    .sidebar {
        width: 66%;
        height: 100%;
        position: fixed;
        top: 0;
        right: -100%;
        bottom: 0;
        background: #fff;
        z-index: 1999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815);
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $( function () {
	$( '.h-right-close>svg' )
		.click( function () {
			$( '.sidebar' )
				.animate( {
					right: "0"
				}, 500 );
			$( '.shelter' )
				.fadeIn( "slow" )
		} );
	$( '.shelter' )
		.click( function ( e ) {
			$( '.sidebar' )
				.animate( {
					right: "-100%"
				}, 500 );
			$( '.shelter' )
				.fadeOut( "slow" )
		} )
} )

</script>

<div class="post">
    <div class="post-header-background post-header-img"
    style="background: url('https://tu.ltyuanfang.cn/api/fengjing.php')" 
>
    <div class="post-header-background-content">
        <ul class="post-header-tag">
            
            
            <li><a href="/tags/java">java</a></li>
            
            <li><a href="/tags/Spring">Spring</a></li>
            
            <li><a href="/tags/Spring Cloud">Spring Cloud</a></li>
            
            
        </ul>
        
        <h1>Spring Cloud</h1>
        <div class="post-header-info">
            <div class="post-header-info-author">
                
                    <svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
                        <path
                            d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
                            p-id="2902" fill="#ffffff"></path>
                    </svg>
                    
                <span class="post-header-info-author-text"> <a href="../../about">SoftLipa</a></span>
                <div class="post-header-info-author-categories">
                    
                         <a href="../../categories/java/" target="_blank" >java</a>
                    
                </div>
                <p>2024-01-08 09:33:36</p>
            </div>
        </div>
    </div>
</div>
    <div class="post-content" id="content">
  
  <div id="article" class="post-content-info">
    

    <h2 id="SpringCloud-Hç‰ˆ"><a href="#SpringCloud-Hç‰ˆ" class="headerlink" title="SpringCloud-Hç‰ˆ"></a>SpringCloud-Hç‰ˆ</h2><p>Springcloudçš„ç‰ˆæœ¬å’ŒSpringbootè¦ä¸¥æ ¼ä¾ç…§å®˜æ–¹æ¥ã€‚</p>
<p>æœåŠ¡æ³¨å†Œä¸­å¿ƒ æœåŠ¡è°ƒç”¨ æœåŠ¡é™çº§ æœåŠ¡ç½‘å…³ æœåŠ¡é…ç½®</p>
<h3 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h3><p>æ‰‹åŠ¨å¼€å¯æ³¨è§£æ”¯æŒï¼Œ Javaç¼–è¯‘ç‰ˆæœ¬ï¼ŒFile Typesè¿‡æ»¤ï¼ˆè¿‡æ»¤æ‰æ²¡å•¥ç”¨ä½†è¿˜æ˜¯æ˜¾ç¤ºäº†çš„ç©æ„å„¿ï¼‰</p>
<p>çˆ¶å·¥ç¨‹pomç‰ˆæœ¬å·ç®¡ç†</p>
<p>ä¸</p>
<p>å‰è€…æ”¾åœ¨çˆ¶é¡¹ç›®ä¸­ï¼Œé”å®šç‰ˆæœ¬+å­æ¨¡å—ä¸ç”¨å†™groupIdå’Œversion,ä½†åªè§„èŒƒä¸å¼•å…¥ã€‚</p>
<p>åè€…æ˜¯çœŸçš„å¼•å…¥ã€‚</p>
<p>æ³¨æ„@Mapperæ³¨è§£ @Resource</p>
<p>åºåˆ—åŒ–çš„é—®é¢˜</p>
<p>åŸºæœ¬çš„ä¾èµ–</p>
<pre><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--ç›‘æ§--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
        &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--mysql-connector-java--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--jdbc--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--çƒ­éƒ¨ç½²--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
        &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<h3 id="æ¶ˆè´¹è€…æ¨¡å—"><a href="#æ¶ˆè´¹è€…æ¨¡å—" class="headerlink" title="æ¶ˆè´¹è€…æ¨¡å—"></a>æ¶ˆè´¹è€…æ¨¡å—</h3><p><strong>RestTemplate</strong> ï¼šç”± Spring æä¾›çš„ä¸€ä¸ª HTTP è¯·æ±‚å·¥å…·,æä¾›äº†å¸¸è§çš„RESTè¯·æ±‚æ–¹æ¡ˆçš„æ¨¡ç‰ˆï¼Œä¾‹å¦‚ GET è¯·æ±‚ã€POST è¯·æ±‚ã€PUT è¯·æ±‚ã€DELETE è¯·æ±‚ä»¥åŠä¸€äº›é€šç”¨çš„è¯·æ±‚æ‰§è¡Œæ–¹æ³•</p>
<p>è¿›è¡Œé…ç½®</p>
<pre><code>@Configuration
public class ApplicationContextConfig &#123;
    @Bean
    public RestTemplate getRestTemplate() &#123;
        return new RestTemplate();
    &#125;
&#125;
</code></pre>
<p>Controllerå±‚æ˜¯ä¸å‰ç«¯çš„è”ç³»ï¼Œæ˜¯è¯·æ±‚çš„è½¬å‘ã€‚åœ¨è¿™é‡Œæ˜¯å®¢æˆ·ç«¯ï¼Œå†™ä¸ªControllerä¸å°±å®Œäº‹å„¿äº† ä½•å¿…å†™ä¸šåŠ¡ç±»è®¿é—®æ•°æ®åº“ç­‰</p>
<pre><code>@RestController
@Slf4j
@RequestMapping(&quot;/consumer&quot;)
public class OrderController &#123;
    public static final String PAYMENT_URL=&quot;http://localhost:8001&quot;;
    @Resource
    private RestTemplate restTemplate;
    @GetMapping(&quot;/payment/create&quot;)
    public CommonResult&lt;Payment&gt; create(Payment payment) &#123;
        return restTemplate.postForObject(PAYMENT_URL +&quot;/payment/create&quot;, payment, CommonResult.class);
    &#125;

    @GetMapping(&quot;/payment/get/&#123;id&#125;&quot;)
    public CommonResult&lt;Payment&gt; getPayment(@PathVariable(&quot;id&quot;)Long id) &#123;
        return restTemplate.getForObject(PAYMENT_URL+ &quot;/payment/get/&quot; + id, CommonResult.class);
    &#125;

&#125;
</code></pre>
<p>æµè§ˆå™¨å¯¹postè¯·æ±‚çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œå› æ­¤å¼•å‡ºpostman æ–‡æ¡£æ¥å£æµ‹è¯• postè¯·æ±‚</p>
<p><img src="/" alt="image-20210708102530746"></p>
<ul>
<li>çƒ­éƒ¨ ç½²devtoolsï¼š <em>æœªé…ç½®æˆåŠŸ</em> å°½ç®¡ä¸Šé¢æ˜¾ç¤ºäº†</li>
</ul>
<p>80ç«¯å£ä¹Ÿæ˜¯æœ‰è®²ç©¶çš„ï¼Œæ˜¯è®¿é—®æœåŠ¡çš„é»˜è®¤ç«¯å£ï¼Œæ‰€ä»¥è¿æ¥ä¸­ç›´æ¥localhostå°±å¯ä»¥äº†ã€‚</p>
<p>rundashboardå·²ç»æ”¹å«servicesäº†</p>
<p>æµ‹è¯•ï¼š</p>
<h3 id="å»ºç«‹é€šç”¨æ¥å£"><a href="#å»ºç«‹é€šç”¨æ¥å£" class="headerlink" title="å»ºç«‹é€šç”¨æ¥å£"></a>å»ºç«‹é€šç”¨æ¥å£</h3><p>å»ºç«‹æ–°æ¨¡å— cloud-api-common</p>
<p>æå–äº†å®ä½“ç±»ï¼Œå¼•å…¥äº†hutoolï¼Œå¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨è®¸å¤šå·¥å…·ç±»</p>
<p>æ³¨å…¥ä¾èµ–</p>
<pre><code>&lt;dependencies&gt;
    &lt;!--çƒ­éƒ¨ç½²--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
        &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;cn.hutool&lt;/groupId&gt;
        &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;
        &lt;version&gt;5.1.0&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>com.fan.entitiesåŒ…</p>
<p>CommonResult ï¼ˆä¸å‰ç«¯äº¤äº’çš„jsonä¸²ï¼‰</p>
<pre><code>@Data
@NoArgsConstructor
@AllArgsConstructor
public class CommonResult&lt;T&gt; &#123;
    private Integer code;
    private String message;
    private T data;
    public CommonResult(Integer code, String message) &#123;
        this(code, message, null);
    &#125;
&#125;
</code></pre>
<p>Paymentï¼ˆå®é™…è¦æ“ä½œçš„POJO)</p>
<pre><code>@Data
@NoArgsConstructor
@AllArgsConstructor
public class Payment implements Serializable &#123;
    private Long id;
    private String serial;
&#125;
</code></pre>
<p>å»ºç«‹å®Œæˆï¼Œä½¿ç”¨mavençš„clean ç„¶åInstallå‘å¸ƒ</p>
<p>æ³¨æ„æ­¤æ—¶çš„pomæ–‡ä»¶ï¼Œ</p>
<pre><code>&lt;parent&gt;
    &lt;artifactId&gt;com.fan.springcloud&lt;/artifactId&gt;
    &lt;groupId&gt;org.example&lt;/groupId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;
</code></pre>
<p>åœ¨æ‰“åŒ…å®Œæˆåæ³¨å…¥åˆ°å…¶ä»–æ¨¡å—çš„pomä¸­æ—¶è¦æ³¨æ„ä¸€è‡´çš„é—®é¢˜ï¼Œä¸èƒ½ç†è§£ä¸ºè¿™æ˜¯é¡¹ç›®åæˆ–è€…åŒ…å</p>
<pre><code>&lt;!--        é€šç”¨åŒ… å®ä½“ç±»--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.example&lt;/groupId&gt;
            &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt;
            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
            &lt;scope&gt;compile&lt;/scope&gt;
        &lt;/dependency&gt;
</code></pre>
<hr>
<h3 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h3><p>ä½œç”¨ç±»ä¼¼äºzookeeperï¼Œä¸è¿‡æœ‰ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯server ä¸€ä¸ªæ˜¯client</p>
<h4 id="æ³¨å†Œä¸­å¿ƒ"><a href="#æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æ³¨å†Œä¸­å¿ƒ"></a>æ³¨å†Œä¸­å¿ƒ</h4><p>æ¨¡å—åï¼šcloud-eureka-server7001</p>
<p>æ³¨å†Œä¸­å¿ƒä¾èµ–æ³¨å…¥</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>åœ¨ä¸»å¯åŠ¨ç±»ä¸­å¢åŠ ä¸€ä¸ªæ³¨è§£</p>
<pre><code>@SpringBootApplication
@EnableEurekaServer  //è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒ
public class EurekaMain7001 &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(EurekaMain7001.class, args);
    &#125;
&#125;
</code></pre>
<p>yamlæ–‡ä»¶çš„é…ç½®</p>
<pre><code>server:
  port: 7001

eureka:
  instance:
    hostname: localhost #eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§°
  client:
    #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œ
    register-with-eureka: false
    #flaseè¡¨ç¤ºè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼ŒåŠŸèƒ½æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹è€Œä¸éœ€è¦å»æ£€ç´¢æœåŠ¡
    fetch-registry: false
    service-url:
      #è®¾ç½®ä¸eureka serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡ éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€
      defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/
</code></pre>
<h4 id="æœåŠ¡æ³¨å…¥"><a href="#æœåŠ¡æ³¨å…¥" class="headerlink" title="æœåŠ¡æ³¨å…¥"></a>æœåŠ¡æ³¨å…¥</h4><p>å³ä¹‹å‰å·²å†™å¥½çš„cloud-provider-payment8001å’Œcloud-consumer-order80</p>
<p>clientä¾èµ–æ³¨å…¥</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>æ”¹yaml</p>
<pre><code>spring:
  application:
    name: cloud-order-service
eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: http://localhost:7001/eureka
</code></pre>
<p>åœ¨è¦æ³¨å†Œè¿›å…¥çš„æœåŠ¡æ¨¡å—ï¼Œä¸»å¯åŠ¨ç±»ä¸Šå¢æ·»ä¸€æ³¨è§£</p>
<pre><code>@EnableEurekaClient
</code></pre>
<p>é‡å¯æœåŠ¡ååœ¨localhost:7001ç«¯å£å¯ä»¥çœ‹åˆ°</p>
<p><img src="/" alt="image-20210708144133138"></p>
<p>æœåŠ¡æ³¨å†Œï¼šå°†æœåŠ¡ä¿¡æ¯æ³¨å†Œè¿›æ³¨å†Œä¸­å¿ƒ</p>
<p>æœåŠ¡å‘ç°ï¼šä»æ³¨å†Œä¸­å¿ƒä¸­è·å–æœåŠ¡ä¿¡æ¯</p>
<p><strong>å®è´¨</strong>ï¼š å­˜keyæœåŠ¡åï¼Œå–valueè°ƒç”¨åœ°å€</p>
<p>å¾®æœåŠ¡RPCè¿œç¨‹æœåŠ¡è°ƒç”¨ æœ€æ ¸å¿ƒçš„æ˜¯ï¼šé«˜å¯ç”¨</p>
<h4 id="Eurekaé›†ç¾¤"><a href="#Eurekaé›†ç¾¤" class="headerlink" title="Eurekaé›†ç¾¤"></a>Eurekaé›†ç¾¤</h4><p>ä¸ºäº†é˜²æ­¢å•èŠ‚ç‚¹çš„æ•…éšœå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„ä¸å¯ç”¨ï¼Œå› æ­¤éœ€è¦æ­å»ºé›†ç¾¤æ¥å®ç°å®¹é”™æ•…éšœå’Œè´Ÿè½½å‡è¡¡ã€‚</p>
<p><strong>åŸç†</strong>ï¼šäº’ç›¸æ³¨å†Œï¼Œäº’ç›¸å®ˆæœ›ã€‚</p>
<h5 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h5><p>ä¿®æ”¹etcä¸‹çš„hostæ–‡ä»¶ ï¼ˆ\Windows\System32\drivers\etc</p>
<p>ä¿®æ”¹yml :ä»¥7001ç«¯å£ä¸ºä¾‹</p>
<pre><code>server:
  port: 7001

eureka:
  instance:
    hostname: eureka7001.com #eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§°
  client:
    #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œ
    register-with-eureka: false
    #flaseè¡¨ç¤ºè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼ŒåŠŸèƒ½æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹è€Œä¸éœ€è¦å»æ£€ç´¢æœåŠ¡
    fetch-registry: false
    service-url:
      #è®¾ç½®ä¸eureka serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡ éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€
      defaultZone: http://eureka7002.com:7002/eureka/
</code></pre>
<p>ä¿®æ”¹hostsæ–‡ä»¶æ—¶æ³¨æ„ï¼Œåˆ©ç”¨Sublime Textä¿®æ”¹åä»è¯¥å·¥å…·ä¸Šçœ‹ç”Ÿæ•ˆäº†ä½†æ˜¯æ‰“å¼€è®°äº‹æœ¬åå‘ç°æ²¡æœ‰ç”Ÿæ•ˆï¼Œå»ºè®®å°†etcæ•´ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶ç²˜è´´è‡³æ¡Œé¢ï¼Œä»æ¡Œé¢ä¸Šç”¨è®°äº‹æœ¬ä¿®æ”¹Hostsæ–‡ä»¶å†å°†æ•´ä¸ªæ–‡ä»¶å¤¹ç²˜è´´å›åŸdriversæ–‡ä»¶å¤¹</p>
<h5 id="æœåŠ¡æ³¨å†Œå…¥é›†ç¾¤ä¸­"><a href="#æœåŠ¡æ³¨å†Œå…¥é›†ç¾¤ä¸­" class="headerlink" title="æœåŠ¡æ³¨å†Œå…¥é›†ç¾¤ä¸­"></a>æœåŠ¡æ³¨å†Œå…¥é›†ç¾¤ä¸­</h5><p>ä»…ä¿®æ”¹ymlæ–‡ä»¶ä¸­çš„defaultZone(æ³¨æ„æ­¤å¤„å®¹æ˜“å‡ºç°è¯¯å†™)å³å¯</p>
<pre><code>defaultZone: http://eureka7001.com:7001/eureka, http://eureka7002.com:7002/eureka
</code></pre>
<p><img src="/" alt="image-20210708160723399"></p>
<h5 id="å¾®æœåŠ¡é›†ç¾¤é…ç½®"><a href="#å¾®æœåŠ¡é›†ç¾¤é…ç½®" class="headerlink" title="å¾®æœåŠ¡é›†ç¾¤é…ç½®"></a>å¾®æœåŠ¡é›†ç¾¤é…ç½®</h5><p>ä»¥æ”¯ä»˜æœåŠ¡ä¸ºä¾‹</p>
<p>ymlæ–‡ä»¶ä¸­é…ç½® ä¿æŒåŸæœ‰springæœåŠ¡åå³å¯</p>
<p>ä½¿ç”¨@Value æµ‹è¯•</p>
<pre><code>@Value(&quot;$&#123;server.port&#125;&quot;) //è·å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹
</code></pre>
<p>è·å–å½“å‰è¿è¡ŒæœåŠ¡çš„ç«¯å£å·</p>
<p>é‡æ–°å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼Œåœ¨Eurekaæ³¨å†Œä¸­å¿ƒä¸­å¯ä»¥çœ‹åˆ°æœåŠ¡é…ç½®å®Œæˆ</p>
<p><img src="/" alt="image-20210708170412957"></p>
<p>ç”±äºåœ¨åŸæœåŠ¡æ¶ˆè´¹è€…çš„Controllerä¸­å·²ç»è®¾ç½®äº†</p>
<pre><code>public static final String PAYMENT_URL=&quot;http://localhost:8001&quot;;
</code></pre>
<p>å› æ­¤å°½ç®¡è®¾ç½®äº†å¾®æœåŠ¡é›†ç¾¤ï¼Œä½†æ˜¯ä¾ç„¶åªä¼šè°ƒç”¨è¿™ä¸€ä¸ªç«¯å£</p>
<p>æŠŠåŸæœ‰localhostä¿®æ”¹ä¸ºEurekaæœåŠ¡çš„zoneï¼Œä¸è¿‡å¦‚æ­¤ç›´æ¥ç»™å¾®æœåŠ¡åœ°å€ä½†æ˜¯å¹¶ä¸èƒ½è¯†åˆ«åœ¨<strong>è¯¥åœ°å€ä¸‹çš„æœºå™¨</strong>ï¼Œå› æ­¤ä¼šé€ æˆé”™è¯¯ã€‚æ‰€ä»¥éœ€è¦å¼€å¯è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p>
<pre><code>@Configuration
public class ApplicationContextConfig &#123;
    @Bean
    @LoadBalanced
    public RestTemplate getRestTemplate() &#123;
        return new RestTemplate();
    &#125;
&#125;
</code></pre>
<p>ä½¿å¾—restTemplateå¯ä»¥è¯†åˆ«å¾®æœåŠ¡åœ°å€ä¸‹çš„æœºå™¨ã€‚å¦‚ä¸‹</p>
<p><img src="/" alt="image-20210708171803786"></p>
<p><img src="/" alt="image-20210708171825525"></p>
<p>æ­¤åï¼Œå¾®æœåŠ¡å¯¹å¤–æš´éœ²çš„ä¸å†æ˜¯åœ°å€å’Œç«¯å£ï¼Œè€Œæ˜¯å¾®æœåŠ¡çš„åœ°å€ã€‚</p>
<h4 id="é…ç½®å®Œå–„å¾®æœåŠ¡ä¿¡æ¯"><a href="#é…ç½®å®Œå–„å¾®æœåŠ¡ä¿¡æ¯" class="headerlink" title="é…ç½®å®Œå–„å¾®æœåŠ¡ä¿¡æ¯"></a>é…ç½®å®Œå–„å¾®æœåŠ¡ä¿¡æ¯</h4><p>actuator</p>
<p>ä¸èƒ½å¤Ÿæ˜¾ç¤ºå¯¹åº”IPï¼Œä¸ä½¿å…¶æ˜¾ç¤ºä¸»æœºåç§°</p>
<p>ä¿®æ”¹æœåŠ¡å</p>
<pre><code>instance:
    instance-id: payment8001  #å‘½åæœåŠ¡å
    prefer-ip-address: true   #æ˜¾ç¤ºip
</code></pre>
<p><img src="/" alt="image-20210709091901519"></p>
<h5 id="æœåŠ¡å‘ç°"><a href="#æœåŠ¡å‘ç°" class="headerlink" title="æœåŠ¡å‘ç°"></a>æœåŠ¡å‘ç°</h5><p>è·å–å¾®æœåŠ¡çš„ä¸€äº›ä¿¡æ¯ port host uri</p>
<pre><code>@Resource
private DiscoveryClient discoveryClient;  //Springä¸‹çš„åŒ…

@GetMapping(&quot;/discovery&quot;)
    public Object discovery() &#123;
        List&lt;String&gt; services = discoveryClient.getServices();
        for (String element : services) &#123;
            log.info(&quot;====element:&quot; + element);
        &#125;
        List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;CLOUD-PAYMENT-SERVICE&quot;);
        for (ServiceInstance instance:instances) &#123;
            log.info(instance.getServiceId() + &quot;\t&quot; + instance.getHost() + &quot;\t&quot; + instance.getPort()
                    +&quot;\t&quot;+instance.getUri());
        &#125;
        return this.discoveryClient;

    &#125;
</code></pre>
<p><img src="/" alt="image-20210709110046985"></p>
<h4 id="è‡ªæˆ‘ä¿æŠ¤"><a href="#è‡ªæˆ‘ä¿æŠ¤" class="headerlink" title="è‡ªæˆ‘ä¿æŠ¤"></a>è‡ªæˆ‘ä¿æŠ¤</h4><p>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šåˆ é™¤ä»»ä½•å¾®æœåŠ¡ã€‚</p>
<p>æ˜¯ä¸ºäº†é˜²æ­¢è¿™æ ·ä¸€ç§æƒ…å†µï¼šEurekaClientæ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯ä¸EurekaServerç½‘ç»œä¸é€šï¼ŒEurekaServerä¸ä¼šç«‹åˆ»å°†EurekaClientæœåŠ¡é™¤å»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒEurekaServeråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼ŒEurekaä¼šæ³¨é”€è¯¥å®ä¾‹ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰ä½†æ˜¯å½“ç½‘ç»œåˆ†åŒºæ•…éšœæ—¶ï¼Œä¸ºäº†é˜²æ­¢å‡ºç°å‰é¢æåˆ°çš„æƒ…å†µä½¿EurekaServerèŠ‚ç‚¹çŸ­æ—¶é—´ä¸¢å¤±è¿‡å¤šå®¢æˆ·ç«¯ä¼šå¯åŠ¨è¯¥æ¨¡å¼ã€‚</p>
<p>å°½å¯èƒ½çš„ä¿ç•™å¥åº·çš„å¾®æœåŠ¡ï¼ˆä¿ç•™æ‰€æœ‰æ— è®ºå¥åº·ä¸å¦</p>
<p><strong>å…³é—­</strong></p>
<p>EurekaæœåŠ¡é…ç½®</p>
<pre><code>eureka:
  server:
    enable-self-preservation: false     #å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œä¿è¯ä¸å¯ç”¨æœåŠ¡è¢«åŠæ—¶å‰”é™¤
    eviction-interval-timer-in-ms: 2000
</code></pre>
<p>å®¢æˆ·ç«¯é…ç½®</p>
<pre><code>lease-renewal-interval-in-seconds: 1 #Eurekaå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’
lease-expiration-duration-in-seconds: 2 #EurekaæœåŠ¡ç«¯æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ä¸ºç§’  
</code></pre>
<hr>
<h3 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h3><p>æ˜¯ä¸´æ—¶èŠ‚ç‚¹</p>
<hr>
<h3 id="Consul"><a href="#Consul" class="headerlink" title="Consul"></a>Consul</h3><p>ä¸‹è½½<a href="https://gitee.com/link?target=https://releases.hashicorp.com/consul/">https://releases.hashicorp.com/consul/</a></p>
<p>ä¸‹è½½è§£å‹åå‘ç°åªæœ‰ä¸€ä¸ª.exeæ–‡ä»¶ï¼Œç‚¹å‡»</p>
<p>åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ consul â€“versionå¯ä»¥æµ‹è¯•ä¸€ä¸‹ æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬ï¼Œä½¿ç”¨consul agent -devå¯ä»¥å¯åŠ¨</p>
<p>ç„¶åç™»é™†localhost:8500</p>
<p><img src="/" alt="image-20210709115859777"></p>
<p>ä¾èµ–å¼•å…¥ï¼š</p>
<pre><code>&lt;!--        consulé…ç½®--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>æœåŠ¡æä¾›è€… yamlé…ç½®</p>
<pre><code>spring:
  application:
    name: consul-provider-payment
  #consulæ³¨å†Œä¸­å¿ƒåœ°å€
  cloud:
    consul:
      host: localhost
      port: 8500
      discovery:
        service-name: $&#123;spring.application.name&#125;
</code></pre>
<p>å…¶ä½™ä¸ä¹‹å‰eurekaåŸºæœ¬ç›¸é€š</p>
<p><img src="/" alt="image-20210709172957200"></p>
<p>ä¸‰è€…çš„å¯¹æ¯”ï¼šCAPåŸåˆ™</p>
<hr>
<h3 id="Nacos"><a href="#Nacos" class="headerlink" title="Nacos"></a>Nacos</h3><p>ä»giteeä¸Šä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://gitee.com/java_architect/nacos">https://gitee.com/java_architect/nacos</a></p>
<p>å•æœºæ¨¡å¼ï¼š</p>
<p>åœ¨è§£å‹ç›®å½•ä¸‹çš„distribution&#x2F;binä¸‹æ‰§è¡Œå‘½ä»¤ cmd startup.cmd -m standalone é—ªé€€</p>
<p>æ³¨ï¼šwindowsä¸‹çš„å¯åŠ¨è„šæœ¬æœ‰ä¸€ç‚¹é—®é¢˜ï¼Œç›´æ¥æ‰§è¡Œä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹å¯åŠ¨è„šæœ¬</p>
<p>æ‰“å¼€startup.cmdæŒ‰ç…§ä¸‹å›¾ä¿®æ”¹ï¼ˆå°†nacos-server.jar ä¿®æ”¹ä¸ºnacos-address.jarï¼‰</p>
<h3 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h3><h4 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h4><p>what?</p>
<p>LB(è´Ÿè½½å‡è¡¡)å°†ç”¨æˆ·çš„è¯·æ±‚å¹³æ‘Šçš„åˆ†é…åˆ°å¤šä¸ªæœåŠ¡ä¸Šï¼Œä»è€Œè¾¾åˆ°æœåŠ¡çš„HAï¼ˆé«˜å¯ç”¨ï¼‰</p>
<p>å¸¸è§çš„æœ‰Nginx,LVS</p>
<p>Ribbonæ˜¯æœ¬åœ°è´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯</p>
<p>å®¢æˆ·ç«¯ä¾§</p>
<p>ä¾èµ–åŒ…å«åœ¨Eurekaä¸­</p>
<p>å·¥ä½œæ­¥éª¤ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šå…ˆé€‰æ‹©EurekaServer,ä¼˜å…ˆé€‰æ‹©åŒä¸€ä¸ªåŒºåŸŸå†… è´Ÿè½½è¾ƒå°‘ çš„ Server</p>
<p>ç¬¬äºŒæ­¥ æ ¹æ®ç”¨æˆ·æŒ‡å®šç­–ç•¥ï¼ˆæ¯”å¦‚è½®è®­ã€éšæœºå’Œæ ¹æ®å“åº”æ—¶é—´åŠ æƒï¼‰ï¼Œ ä»serverå–åˆ°çš„æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªåœ°å€ã€‚</p>
<h4 id="è´Ÿè½½å‡è¡¡è§„åˆ™"><a href="#è´Ÿè½½å‡è¡¡è§„åˆ™" class="headerlink" title="è´Ÿè½½å‡è¡¡è§„åˆ™"></a>è´Ÿè½½å‡è¡¡è§„åˆ™</h4><p>è½®è®­ã€éšæœºã€åŠ æƒ</p>
<p>ä¸»å¯åŠ¨ç±»ä¸­çš„@SpringbootApplicationæ³¨è§£ä¸‹æœ‰ä¸€@ComponentScanä¼šæ‰«æä¸å…¶åŒåŒ…å’Œè¿™äº›åŒ…çš„å­åŒ…çš„æ³¨è§£ã€‚</p>
<p>ç”±æ­¤ï¼Œè‡ªå®šä¹‰çš„ç”¨æ¥æ›¿æ¢Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥çš„é…ç½®ç±»ä¸èƒ½æ”¾åœ¨å’Œä¸»å¯åŠ¨ç±»çš„åŒåŒ…,ä¸ç„¶ä¼šè¢«æ‰€æœ‰çš„Ribbonå®¢æˆ·ç«¯å…±äº«ï¼Œæ²¡æœ‰åŠæ³•ç‰¹æ®Šå®šåˆ¶ã€‚ IRuleï¼šæ ¹æ®ç‰¹å®šç®—æ³•</p>
<pre><code>@Configuration
public class MySelfRule &#123;
    @Bean
    public IRule myRule() &#123;
        //éšæœº
        return new RandomRule();
    &#125;
&#125;
</code></pre>
<p>ä¸»å¯åŠ¨ç±»æ·»åŠ æ–°çš„æ³¨è§£ æŒ‡æ˜å…¶ç”¨çš„æœåŠ¡å’Œè§„åˆ™é…ç½®</p>
<pre><code>@RibbonClient(name=&quot;CLOUD-PAYMENT-SERVICE&quot;,configuration = MySelfRule.class)
</code></pre>
<p>è½®è¯¢çš„é€»è¾‘ï¼šç¬¬xæ¬¡è¯·æ±‚%æœåŠ¡å™¨é›†ç¾¤æ€»æ•°é‡&#x3D;å®é™…è°ƒç”¨æœåŠ¡å™¨çš„ä¸‹æ ‡ã€</p>
<p>æ‰‹å†™è½®è®­ç®—æ³•</p>
<hr>
<h3 id="RestTemplate"><a href="#RestTemplate" class="headerlink" title="RestTemplate"></a>RestTemplate</h3><p>GetForObject:</p>
<p>GetForEntity:</p>
<hr>
<h3 id="Hystrix"><a href="#Hystrix" class="headerlink" title="Hystrix"></a>Hystrix</h3><h4 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h4><p><strong>æœåŠ¡é›ªå´©ï¼š</strong></p>
<p>å¾®æœåŠ¡Aå’ŒBè°ƒç”¨C,Cåˆè°ƒç”¨â€¦..è¿™æ ·ç§°ä¸ºæ‰‡å‡ºæ•ˆåº”ï¼Œåœ¨è¯¥æ•ˆåº”é“¾è·¯ä¸Šå¦‚æœå‡ºç°æŸä¸€å¾®æœåŠ¡å¤±æ•ˆï¼Œåˆ™å¯¹å¾®æœåŠ¡Açš„è°ƒç”¨ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„èµ„æºï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œå³â€œé›ªå´©æ•ˆåº”â€ã€‚ â€“çº§è”æ•…éšœ</p>
<p><strong>what</strong></p>
<p>Hystrixæ˜¯ä¸€ä¸ªç”¨äºå¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å»¶è¿Ÿå’Œå®¹é”™çš„å¼€æºåº“ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œè®¸å¤šä¾èµ–ä¸å¯é¿å…çš„ä¼šè°ƒç”¨å¤±è´¥ï¼Œæ¯”å¦‚è¶…æ—¶ã€å¼‚å¸¸ç­‰ï¼ŒHystrixèƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä½“æœåŠ¡å¤±è´¥ï¼Œé¿å…çº§è”æ•…éšœï¼Œä»¥æé«˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼¹æ€§ã€‚</p>
<p>â€œæ–­è·¯å™¨â€æœ¬èº«æ˜¯ä¸€ç§å¼€å…³è£…ç½®ï¼Œå½“æŸä¸ªæœåŠ¡å•å…ƒå‘ç”Ÿæ•…éšœåï¼Œé€šè¿‡æ–­è·¯å™¨çš„æ•…éšœç›‘æ§(ç±»ä¼¼ç†”æ–­ä¿é™©ä¸),å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªç¬¦åˆé¢„æœŸçš„ã€<strong>å¯å¤„ç†</strong>çš„å¤‡é€‰å“åº”ï¼ˆFallback)ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ— æ³•å¤„ç†çš„å¼‚å¸¸ã€‚</p>
<p>è¿™å°±ä¿è¯äº†æœåŠ¡è°ƒç”¨æ–¹çš„çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´ã€ä¸å¿…è¦åœ°å ç”¨ï¼Œä»è€Œé¿å…äº†æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è”“å»¶ï¼Œä¹ƒè‡³åæ¥é›ªå´©ã€‚</p>
<h4 id="é‡è¦æ¦‚å¿µ"><a href="#é‡è¦æ¦‚å¿µ" class="headerlink" title="é‡è¦æ¦‚å¿µ"></a>é‡è¦æ¦‚å¿µ</h4><p>æœåŠ¡é™çº§ï¼šè¿”å›æç¤º â€“ä¼šå‡ºç°æœåŠ¡é™çº§çš„å‡ ç§æƒ…å†µï¼š</p>
<ol>
<li>ç¨‹åºè¿è¡Œå¼‚å¸¸</li>
<li>è¶…æ—¶</li>
<li>æœåŠ¡ç†”æ–­è§¦å‘</li>
<li>çº¿ç¨‹æ± &#x2F;ä¿¡å·é‡æ‰“æ»¡ä¹Ÿä¼šå¯¼è‡´æœåŠ¡é™çº§</li>
</ol>
<p>æœåŠ¡é™æµï¼šä¸€ç§’nä¸ªï¼Œæœ‰åºè¿›è¡Œ</p>
<p>æœåŠ¡ç†”æ–­ï¼šæ‹’ç»è®¿é—®ï¼Œè°ƒç”¨è®¿é—®é™çº§</p>
<h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>åŸºæœ¬çš„æ­å»º</p>
<p>ä¾èµ–å¼•å…¥</p>
<pre><code>&lt;!--        hystrix--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
<p>å…¶ä½™æ˜¯äº›åŸºæœ¬çš„ä¸šåŠ¡é€»è¾‘ï¼Œ@RestController+returnå­—ç¬¦ä¸²</p>
<p>Jmeter é«˜å¹¶å‘æ¨¡æ‹Ÿ</p>
<h4 id="é—®é¢˜å’Œè§£å†³"><a href="#é—®é¢˜å’Œè§£å†³" class="headerlink" title="é—®é¢˜å’Œè§£å†³"></a>é—®é¢˜å’Œè§£å†³</h4><p>ä¸€èˆ¬æœåŠ¡é™çº§éƒ½æ˜¯åšåœ¨å®¢æˆ·ç«¯</p>
<p>è¶…æ—¶ï¼ŒæœåŠ¡å™¨å˜æ…¢ â€“æœåŠ¡é™çº§</p>
<p>å‡ºé”™ï¼ˆå®•æœºæˆ–ç¨‹åºè¿è¡Œå‡ºé”™ â€“æœåŠ¡é™çº§</p>
<p>æœåŠ¡ç«¯æ²¡é—®é¢˜ï¼Œå®¢æˆ·ç«¯å‡ºé”™æˆ–ä¸æ»¡è¶³è‡ªæˆ‘è¦æ±‚ï¼ˆå¦‚ç­‰å¾…æ—¶é—´è¶…è¿‡è¦æ±‚æ—¶é—´ï¼‰ â€“å®¢æˆ·ç«¯è‡ªå·±å¤„ç†é™çº§</p>
<h4 id="æœåŠ¡é™çº§"><a href="#æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡é™çº§"></a>æœåŠ¡é™çº§</h4><p>8001å…ˆä»è‡ªèº«å‡ºå‘ï¼šè®¾ç½®è‡ªèº«è°ƒç”¨è¶…æ—¶æ—¶é—´çš„å³°å€¼ï¼Œå³°å€¼å†…å¯ä»¥æ­£å¸¸è¿è¡Œã€‚</p>
<p>è¶…æ—¶</p>
<p>è¶…è¿‡éœ€æœ‰å…œåº•æ–¹æ³•å¤„ç†ï¼ŒåšæœåŠ¡é™çº§fallback</p>
<pre><code>/*
è°ƒç”¨æ³¨è§£çš„æœåŠ¡æ–¹æ³•å¤±è´¥å¹¶æŠ›å‡ºé”™è¯¯ä¿¡æ¯åä¼šè‡ªåŠ¨è°ƒç”¨
@HystrixCommandæ ‡æ³¨å¥½çš„methodç±»ä¸­çš„æŒ‡å®šæ–¹æ³• å°±æ˜¯æ–¹æ³•å
 */
@HystrixCommand(fallbackMethod = &quot;paymentInfo_TimeoutHandler&quot;)
//è®¾ç½®çº¿ç¨‹è¶…æ—¶æ—¶é—´è¶…è¿‡äº†å°±è°ƒç”¨å¤„ç†æ–¹æ³•
@HystrixCommand(fallbackMethod = &quot;paymentInfo_TimeoutHandler&quot;, commandProperties =&#123;@HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;3000&quot;)&#125;)
    
</code></pre>
<p>2.åœ¨ä¸»å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£@EnableCircuitBreaker</p>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code>int age=10/0; 
</code></pre>
<p>å½“å‰æœåŠ¡ä¸å¯ç”¨ï¼ŒåšæœåŠ¡é™çº§åŒä¸Šã€‚</p>
<h5 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h5><p>yamlä¿®æ”¹é…ç½®</p>
<pre><code>#å¼€å¯
feign:
  hystrix:
    enabled: true
</code></pre>
<p>ä¸»å¯åŠ¨ç±»æ³¨å†Œï¼š</p>
<pre><code>@EnableHystrix
</code></pre>
<p>è°ƒè¯•æ¶ˆè´¹æä¾›è€…ç«¯æ­£å¸¸ï¼Œåœ¨å®¢æˆ·ç«¯è®¾ç½®é”™è¯¯ï¼Œä¾ç„¶æŒ‰ç…§æŒ‡å®šæ­¥éª¤è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>ç»¼ä¸Šï¼Œå°½ç®¡ä¸Šè¿°æ“ä½œæ»¡è¶³äº†åœ¨åŠ è½½è¶…æ—¶æ—¶è¿”å›ç»™ç”¨æˆ·æŒ‡å®šé”™è¯¯ä¿¡æ¯ï¼Œä½†æ˜¯æ¯ä¸ªå¾®æœåŠ¡ä¸­çš„æ¯ä¸ªæ–¹æ³•éƒ½è¦è®¾ç½®ä¸€ä¸ªâ€œå…œåº•â€çš„ï¼Œå¤ªå†—ä½™äº†ã€‚è€Œä¸”å’Œæ­£å¸¸çš„ä¸šåŠ¡é€»è¾‘æ··æ‚åœ¨äº†ä¸€èµ·ã€‚</p>
<p>å¯ä»¥é™¤äº†ç‰¹æ®Šä¸šåŠ¡å¤–æŒ‡å®šä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•</p>
<pre><code>@DefaultProperties(defaultFallback = &quot;payment_Global_FallbackMethod&quot;)
/...../
    //å…¨å±€è¶…æ—¶fallbackæ–¹æ³•
    public String payment_Global_FallbackMethod() &#123;
        return &quot;å…¨å±€å¤„ç†æ–¹æ³•&quot;;
    &#125;
</code></pre>
<p>ä¼˜å…ˆçº§ä½äºç›´æ¥åœ¨æ–¹æ³•ä¸ŠæŒ‡å®šçš„HystrixCommand</p>
<h4 id="æœåŠ¡ç†”æ–­"><a href="#æœåŠ¡ç†”æ–­" class="headerlink" title="æœåŠ¡ç†”æ–­"></a>æœåŠ¡ç†”æ–­</h4><p>è¾¾åˆ°æœ€å¤§æœåŠ¡è®¿é—®åï¼Œç›´æ¥æ‹’ç»è®¿é—®ï¼Œç„¶åè°ƒç”¨æœåŠ¡é™çº§çš„æ–¹æ³•å¹¶è¿”å›å‹å¥½æç¤ºã€‚ä½†æ˜¯åé¢è¦<strong>æ¢å¤è°ƒç”¨é“¾è·¯</strong>ã€‚</p>
<pre><code>@HystrixCommand(fallbackMethod = &quot;paymentCircuitBreaker_fallback&quot;, commandProperties = &#123;
        @HystrixProperty(name=&quot;circuitBreaker.enabled&quot;,value = &quot;true&quot;),  //å¼€å¯æ–­è·¯å™¨
        @HystrixProperty(name=&quot;circuitBreaker.requestVolumeThreshold&quot;, value = &quot;10&quot;),//è¯·æ±‚å®¹é‡
        @HystrixProperty(name=&quot;circuitBreaker.sleepWindowInMilliseconds&quot;, value = &quot;10000&quot;),  
        @HystrixProperty(name=&quot;circuitBreaker.errorThresholdPercentage&quot;, value = &quot;60&quot;)//é”™è¯¯ç™¾åˆ†æ¯”è®¾ç½®
&#125;)
</code></pre>
<p>å¯åŠ¨æœåŠ¡ï¼Œç»æµ‹è¯•ï¼Œåœ¨ç´¯è®¡ä¸€å®šé”™è¯¯æ•°é‡åï¼Œç”±äºé”™è¯¯ç‡é™åˆ¶ï¼Œè¾“å…¥æ­£ç¡®çš„idä¾æ—§æ˜¯è¿”å›é”™è¯¯æç¤ºã€‚</p>
<p>ç†”æ–­ç±»å‹ï¼š</p>
<ul>
<li>ç†”æ–­æ‰“å¼€ï¼šè¯·æ±‚ä¸å†è¿›è¡Œè°ƒç”¨å½“å‰æœåŠ¡ï¼Œå†…éƒ¨è®¾ç½®æ—¶é’Ÿä¸€èˆ¬è®¾ç½®ä¸ºMTTRï¼Œå½“æ‰“å¼€æ—¶é•¿è¾¾åˆ°æ‰€è®¾æ—¶é’Ÿåˆ™è¿›å…¥åŠç†”æ–­çŠ¶æ€</li>
<li>ç†”æ–­å…³é—­ï¼šç†”æ–­å…³é—­ä¸ä¼šå¯¹æœåŠ¡è¿›è¡Œç†”æ–­</li>
<li>ç†”æ–­åŠå¼€ï¼šéƒ¨åˆ†è¯·æ±‚æ ¹æ®è§„åˆ™è°ƒç”¨å½“å‰æœåŠ¡ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸä¸”ç¬¦åˆè§„åˆ™åˆ™è®¤ä¸ºæ­¤æ—¶æœåŠ¡å™¨æ¢å¤æ­£å¸¸ï¼Œå…³é—­ç†”æ–­ã€‚</li>
</ul>
<p><img src="/" alt="image-20210715105613708"></p>
<h4 id="Hystrixå·¥ä½œæµç¨‹"><a href="#Hystrixå·¥ä½œæµç¨‹" class="headerlink" title="Hystrixå·¥ä½œæµç¨‹"></a>Hystrixå·¥ä½œæµç¨‹</h4><hr>
<h3 id="Gateway"><a href="#Gateway" class="headerlink" title="Gateway"></a>Gateway</h3><p>æœåŠ¡ç½‘å…³ï¼šå¾®æœåŠ¡çš„å…¥å£</p>
<p><img src="/" alt="image-20210715115240519"></p>
<p>GatewayåŸºäº<strong>å¼‚æ­¥éé˜»å¡</strong>æ¨¡å‹å¼€å‘ï¼Œ<strong>ç‰¹æ€§</strong>å¦‚ä¸‹ï¼š</p>
<p>åŠ¨æ€è·¯ç”±ï¼šèƒ½å¤ŸåŒ¹é…ä»»ä½•è¯·æ±‚å±æ€§</p>
<p>å¯ä»¥å¯¹è·¯ç”±æŒ‡å®šPredicateå’ŒFilter</p>
<p>ç»§æ‰¿Hystrixçš„CircuitBreakeråŠŸèƒ½</p>
<p>ç»§æ‰¿SpringCloudæœåŠ¡å‘ç°åŠŸèƒ½</p>
<p>æ˜“äºç¼–å†™çš„Predicateå’ŒFilter è¯·æ±‚é™æµ æ”¯æŒè·¯å¾„é‡å†™</p>
<h4 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h4><p>è·¯ç”±ï¼šæ„å»ºç½‘å…³çš„åŸºæœ¬æ¨¡å—ï¼Œç”±IDï¼Œç›®æ ‡URIï¼Œä¸€ç³»åˆ—æ–­è¨€å’Œè¿‡æ»¤å™¨ç»„æˆã€‚</p>
<p>æ–­è¨€ï¼šå¼€å‘äººå‘˜å¯ä»¥åŒ¹é…HTTPè¯·æ±‚ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ˆå¦‚è¯·æ±‚å¤´æˆ–è¯·æ±‚å‚æ•°ï¼‰å¦‚æœè¯·æ±‚ä¸æ–­è¨€ç›¸åŒ¹é…åˆ™è¿›è¡Œè·¯ç”±</p>
<p>è¿‡æ»¤ï¼šæŒ‡Springæ¡†æ¶ä¸­GatewayFilterå®ä¾‹ï¼Œä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå¯åœ¨è¯·æ±‚è¢«è·¯ç”±å‰æˆ–ä¹‹åå¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ã€‚</p>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šè·¯ç”±è½¬å‘+æ‰§è¡Œè¿‡æ»¤é“¾</p>
<h4 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>ä¸æ­¤åŒæ—¶ä¸éœ€è¦webå’Œactuatorä¾èµ–ï¼Œæ¯•ç«Ÿåšçš„æ˜¯ç½‘å…³</p>
<pre><code>&lt;!--æ–°å¢gateway--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>yaml ï¼ˆå…¶ä½™éƒ¨åˆ†åŒæ™®é€šçš„æœåŠ¡ï¼‰</p>
<pre><code> cloud:
    gateway:
      routes:
        - id: payment_routh #è·¯ç”±çš„IDï¼Œæ²¡æœ‰å›ºå®šè§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å
          uri: http://localhost:8001   #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€
          predicates:
            - Path=/payment/get/**   #æ–­è¨€,è·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±

        - id: payment_routh2
          uri: http://localhost:8001   #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€
          predicates:
            - Path=/payment/lb/**   #æ–­è¨€,è·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±
</code></pre>
<p>åªéœ€è¦æ·»åŠ ä¸€ä¸ªä¸»å¯åŠ¨ç±»ï¼Œå¯åŠ¨åå¯ä»¥å‘ç°ï¼Œå°†åŸ8001ç«¯å£ä¸‹çš„æœåŠ¡è¯·æ±‚é“¾æ¥ï¼Œä¿®æ”¹ä¸º9527å…¶ä½™ä¿æŒä¸å˜ä¾ç„¶å¯ä»¥è¯·æ±‚æˆåŠŸã€‚</p>
<p>å¦å¤–ä¸€ç§æ–¹å¼ï¼šä¹Ÿå¯ä»¥åœ¨ç±»ä¸­æ³¨å…¥Beanï¼Œä½†æ˜¯å¾ˆç¹çã€‚</p>
<p>å°è¯•è‡ªå·±å†™ä¸€ä¸ª - id: test uri:<a href="https://gitee.com/link?target=http://www.bilibili.com(http://%E5%BF%85%E4%B8%8D%E5%8F%AF%E5%B0%91)">http://www.bilibili.com(http:&#x2F;&#x2F;å¿…ä¸å¯å°‘)</a> åœ¨-Pathåè·Ÿä¸€ä¸ªåˆç†çš„å‚æ•°å³å¯è·³è½¬åˆ°ç«™ç‚¹ä¸‹çš„ç½‘å€</p>
<p>é…ç½®åŠ¨æ€è·¯ç”± é›†ç¾¤ç¯å¢ƒä¸‹</p>
<p><img src="/" alt="image-20210716112648127"></p>
<p>åˆ©ç”¨ç½‘å…³å®ç°è´Ÿè½½å‡è¡¡</p>
<p>yamlé…ç½®</p>
<pre><code>discovery:
        locator:
          enabled: true  #å¼€å¯ä»æ³¨å†Œä¸­å¿ƒåŠ¨æ€åˆ›å»ºè·¯ç”±çš„åŠŸèƒ½ï¼Œåˆ©ç”¨å¾®æœåŠ¡åè¿›è¡Œè·¯ç”±
</code></pre>
<p>åŸæœ‰çš„æ–¹å¼ï¼Œä¸€ä¸ªåŠŸèƒ½å¯èƒ½æ˜¯å¤šä¸ªå¾®æœåŠ¡æä¾›çš„ï¼Œæ¯”å¦‚payment8001å’Œpayment8002ï¼Œå¯ä»¥è®©å¯¹åº”çš„uriä»localhost:xxxæ›´æ”¹ä¸ºæœåŠ¡åï¼Œ</p>
<pre><code>uri: lb://cloud-payment-service
</code></pre>
<p>lbè¡¨ç¤ºuriä½¿ç”¨çš„åè®®ï¼Œè¡¨ç¤ºå¯ç”¨Gatewayçš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼ˆLoadBalncerçš„ç¼©å†™ï¼‰æ ¹æ®æµ‹è¯•ç»“æœâ€”â€”è¿”å›ç«¯å£å·8001å’Œ8002äº¤æ›¿å‡ºç°ï¼Œæ¨æµ‹æ­¤å¤„è´Ÿè½½å‡è¡¡é»˜è®¤åº”è¯¥æ˜¯è½®è¯¢</p>
<hr>
<h3 id="é”™è¯¯åˆ†æ"><a href="#é”™è¯¯åˆ†æ" class="headerlink" title="é”™è¯¯åˆ†æ"></a>é”™è¯¯åˆ†æ</h3><h4 id="1-æ‰¾ä¸åˆ°ä¸»ç±»"><a href="#1-æ‰¾ä¸åˆ°ä¸»ç±»" class="headerlink" title="1.æ‰¾ä¸åˆ°ä¸»ç±»"></a>1.æ‰¾ä¸åˆ°ä¸»ç±»</h4><p>å¯åŠ¨æ¶ˆè´¹è€…çš„ä¸»ç±»æ—¶æ˜¾ç¤ºæ‰¾ä¸åˆ°ä¸»ç±»ï¼Œç»“æœåœ¨é…ç½®ä¸­å‘ç°å¯åŠ¨æ—¶å»äº†æœåŠ¡æä¾›è€…æ¨¡å—å¯»æ‰¾è¯¥ä¸»ç±»ï¼Œå› æ­¤å½“ç„¶æ‰¾ä¸åˆ°ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆä¼šå»å¦ä¸€ä¸ªæ¨¡å—ä¸­å¯»æ‰¾è¯¥ç±»ï¼ŒåŸå› æš‚ä¸æ˜ã€‚ä¸çŸ¥æ˜¯å¦æœ¬äººæ“ä½œä¸å½“ï¼Œå¦ï¼šç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶æœªæ˜¾ç¤ºä¸»ç±»æ‰¾ä¸åˆ°é‡å¯IDEAåæ‰å¦‚æ­¤ã€‚</p>
<h4 id="2-POMæ–‡ä»¶"><a href="#2-POMæ–‡ä»¶" class="headerlink" title="2.POMæ–‡ä»¶"></a>2.POMæ–‡ä»¶</h4><p>åœ¨æœåŠ¡æ¶ˆè´¹è€…æ¨¡å—çš„pom.xmlä¸­å¼•å…¥äº†jdbcã€mybatisã€mysql-connectorç›¸å…³ï¼Œå¯åŠ¨æ—¶æ˜¾ç¤ºDataSourceé”™è¯¯ã€‚</p>
<h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><h4 id="å…³äºPOSTä¸GETçš„ä¸€äº›ç†è§£ï¼š"><a href="#å…³äºPOSTä¸GETçš„ä¸€äº›ç†è§£ï¼š" class="headerlink" title="å…³äºPOSTä¸GETçš„ä¸€äº›ç†è§£ï¼š"></a>å…³äºPOSTä¸GETçš„ä¸€äº›ç†è§£ï¼š</h4><p>è·å–èµ„æºä¸åˆ›å»ºèµ„æº</p>
<p>æœ¬è´¨ä¸Šéƒ½æ˜¯TCPçš„é“¾æ¥ä¸è¿‡ç”±äºhttpçš„è§„èŒƒå’Œæµè§ˆå™¨çš„é™åˆ¶ï¼ŒäºŒè€…åœ¨åº”ç”¨è¿‡ç¨‹ä¸­ä½“ç°å‡ºä¸€äº›ä¸åŒã€‚GETè·å–å‚æ•°æ˜¯ä»urlä¸­ï¼ŒPOSTæ˜¯ä»è¯·æ±‚çš„RequestBodyä¸­</p>
<p>å¯¹äºGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼› äº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…</p>
<p>è€Œå¯¹äºPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰ã€‚ äº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…</p>
<p>è¿›ä¸€æ­¥åˆ†æï¼Œå°½ç®¡çœ‹ä¼¼POSTæ–¹å¼å¤šäº†ä¸€ä¸ªåŒ…ï¼Œä½†æ˜¯ç½‘ç»œç¯å¢ƒè‰¯å¥½æ—¶è¿™ç‚¹å·®è·å¯ä»¥å¿½ç•¥ï¼Œç½‘ç»œç¯å¢ƒä¸å¥½æ—¶ä¸¤ä¸ªæ•°æ®åŒ…å¯¹äºæ•°æ®çš„å®Œæ•´æ€§éªŒè¯ä¸Šæœ‰ä¼˜åŠ¿ã€‚ ï¼ˆä¸è¿‡æ—¢ç„¶æ˜¯TCPä¸‹çš„ï¼Œè¿™å’ŒTCPçš„ç¨³å®šæ˜¯å¦å†²çªå‘¢ï¼Ÿ</p>
<h4 id="æ—¥å¿—ä¿å­˜é—®é¢˜"><a href="#æ—¥å¿—ä¿å­˜é—®é¢˜" class="headerlink" title="æ—¥å¿—ä¿å­˜é—®é¢˜"></a>æ—¥å¿—ä¿å­˜é—®é¢˜</h4><h4 id="ä¸€äº›æ³¨è§£"><a href="#ä¸€äº›æ³¨è§£" class="headerlink" title="@ä¸€äº›æ³¨è§£"></a>@ä¸€äº›æ³¨è§£</h4><pre><code>å†ç†è§£@ResponseBody ä¸ @RequestBody
   ç”¨äºè¯»å– Request è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯ POST,PUT,DELETE,GET è¯·æ±‚ï¼‰çš„ body éƒ¨åˆ†å¹¶ä¸”**Content-Type ä¸º application/json** æ ¼å¼çš„æ•°æ®ï¼Œæ¥æ”¶åˆ°æ•°æ®ä¹‹åä¼šè‡ªåŠ¨å°†æ•°æ®ç»‘å®šåˆ° Java å¯¹è±¡ä¸Šå»ã€‚ç³»ç»Ÿä¼šä½¿ç”¨`HttpMessageConverter`æˆ–è€…è‡ªå®šä¹‰çš„`HttpMessageConverter`å°†è¯·æ±‚çš„ body ä¸­çš„ json å­—ç¬¦ä¸²è½¬æ¢ä¸º java å¯¹è±¡ã€‚
æ³¨ï¼šä¸€ä¸ªè¯·æ±‚ï¼Œåªæœ‰ä¸€ä¸ªRequestBodyï¼›ä¸€ä¸ªè¯·æ±‚ï¼Œå¯ä»¥æœ‰å¤šä¸ªRequestParamã€‚


`@PathVariable`ç”¨äºè·å–è·¯å¾„å‚æ•°ï¼Œ`@RequestParam`ç”¨äºè·å–æŸ¥è¯¢å‚æ•°ã€‚
</code></pre>
<p>hutoolå·¥å…·åŒ…</p>
<p>JUCç¼–ç¨‹</p>
<p>ä¸»è¦æ˜¯å…ˆç†è§£è‡ªæ—‹é”çš„é—®é¢˜ï¼Œå›æ¥æ‰‹å†™Ribbonçš„è´Ÿè½½å‡è¡¡ç®—æ³•</p>
<h4 id="æŠ€æœ¯é€‰å‹çš„é—®é¢˜"><a href="#æŠ€æœ¯é€‰å‹çš„é—®é¢˜" class="headerlink" title="æŠ€æœ¯é€‰å‹çš„é—®é¢˜"></a>æŠ€æœ¯é€‰å‹çš„é—®é¢˜</h4>
  </div>
  <div id=""></div>
</div>

<script>
  
Fancybox.bind('[data-fancybox="fancybox-gallery-img"]', {
  dragToClose: true,
  Toolbar: true,
  closeButton: "top",
  Image: {
    zoom: true,
  },
  on: {
    initCarousel: (fancybox) => {
      const slide = fancybox.Carousel.slides[fancybox.Carousel.page];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
    "Carousel.change": (fancybox, carousel, to, from) => {
      const slide = carousel.slides[to];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
  },
});
</script>

<style>
    #noneimg img {
        display: none;
        z-index: 9999;
        /* width: 600px !important; */
        min-width: 0%;
        max-width: 90%;
        max-height: 80%;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            max-width: 88%
        }
    }
</style>

    <div class="post-paging">
    
    <a href="/2024/01/08/LSS/springboot/">
        <div class="post-paging-last">
            <span>ä¸Šä¸€ç¯‡</span>
            <p>Springboot</p>
        </div>
    </a>
    

    
    <a href="/2024/01/08/LSS/tools/">
        <div class="post-paging-next">
            <span>ä¸‹ä¸€ç¯‡</span>
            <p>å·¥å…·</p>
        </div>
    </a>
    
</div>
</div>
		
<div class="footer">
	<div class="Copyright">
		Â©2024 By SoftLipa. ä¸»é¢˜ï¼š<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/79e/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quietä¸»é¢˜">
		</a>
		
	</div>
</div>

<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            transition: border .5s;
            border: 1px solid rgba(18, 24, 58, 0.06);

            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari å’Œ Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $( '#js-go_top' )
	.gotoTop( {
		offset: 500,
		speed: 300,
		animationShow: {
			'transform': 'translate(0,0)',
			'transition': 'transform .5s ease-in-out'
		},
		animationHide: {
			'transform': 'translate(100px,0)',
			'transition': 'transform .5s ease-in-out'
		}
	} );
</script>


    <!-- Gitalk -->
    <script>
        const data = '{"clientID":"02b3c","clientSecret":"adfc7b4","repo":"gimment","owner":"duneng","admin":"duneng"}'
        const gitalk = new Gitalk({
            ...JSON.parse( data),
            id:location.pathname,
            distractionFreeMode:false
        })
        
        if(Boolean('false')){
            gitalk.render('gitalk-container')
        }
    </script>

<script>
	console.log('\n %c Hexo-Quiet ä¸»é¢˜ %c https://github.com/79e/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>
</html>

